### 渲染模块
由于渲染机制过于复杂，所以渲染模块在执行的过程中会被划分为很多子阶段，输入的HTML经过这些子阶段，最后输出像素。我们把这样一个处理流程叫做渲染流水线，其大致流程如下图：
![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/http/xuanranjizhi.png)
按照渲染的时间顺序，流水线可分为如下几个子阶段：构建DOM树，样式计算，布局阶段，分层，绘制，分块，光栅化和合成。
- 开始每个子阶段都有**输入内容**
- 然后每个子阶段有其**处理过程**。
- 最终每个子阶段会**生成输出内容**

#### 构建DOM树
为什么要构建DOM树呢？这是因为浏览器无法直接理解和使用HTML,所以需要将HTML转成浏览器能够理解的结构-DOM树<br>
![DOM树的构建](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/http/domshudegoujian.png)<br>
可以看出来构建DOM树的输入内容是一个非常简单的HTML文件，然后经由HTML解析器解析，最终输出树状结构的DOM.
为了更加直观的理解DOM树，可以在`Console`标签打开控制台，然后在控制台里面输入`document`后回车<br>
![DOM树结构](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/http/domshudegoujian.png)<br>
图中的document就是DOM结构，可以看到，DOM和HTML内容几乎是一样的，但和HTML不同的是，DOM是保存在内存中树状结构，可以通过javascript来查询或修改内容

#### 样式计算（Recalculate Style）
样式计算的目的是为了计算出DOM节点中每个元素的具体样式，这个阶段大体可分为三步来完成
1. 把CSS转换为浏览器能够理解的结构
那CSS样式的来源主要是哪些呢？
<br>

![css样式](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/http/cssjiazai.png)
<br>
可以知道CSS样式来源主要有三种：
- 通过link引用的外部CSS文件
- style标记内的CSS
- 元素的style属性内嵌的CSS
和HTML文件一样，浏览器也是无法直接理解这些纯文本的CSS样式，所以当渲染引擎接收到CSS文本时，会执行一个转换操作，将css文件转换为可以理解的结构-styleSheets
为了加深理解，你可以在Chrome控制台查看其结构，只需要在控制台中输入document.styleSheets
渲染引擎会把获取到的css文本全部转换为styleSheets结构中的数据，并且该结构同时具备了查询和修改的功能。

2. 转换样式表中的属性值，使其标准化
现在我们已经把现有的CSS文本转换成浏览器可以理解的结构了，那么接下来就要对其进行属性值的标准化操作
```
body { font-size: 2em }
p {color:blue;}
span  {display: none}
div {font-weight: bold}
div  p {color:green;}
div {color:red; }

```
可以看到上面的CSS文本中有很多属性值,如：2em,blue,bold,这些类型数值不容易被渲染引擎理解，所以需要将所有的值转换为渲染引擎容易理解的，标准化的计算值，这个过程就是属性值标准化。
<br>

![css标准化]()
<br>