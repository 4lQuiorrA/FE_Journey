#!/usr/bin/env node

var program = require('commander');
var Printer = require('@darkobits/lolcatjs');
const chalk = require('chalk');
const interfacedata = require('./index').interfacedata;
var inquirer = require('inquirer');
const json2ts = require("json2ts");
const userhome = require("user-home");
const shelljs =require("shelljs");
const ora = require('ora');
const input = [
    ' Ëš Ëšâ˜…* ã€‚ â€¢ Ëš Ëš Ë› Ëš Ë› â€¢  ',
    'â€¢ã€‚â˜…ã€‚*Ëšâ˜… ã€‚* ã€‚ ',
    'Â° ã€‚ Â° Ë›ËšË› * _Î _____*ã€‚*Ëš  ',
    'Ëš Ë› â€¢Ë›â€¢Ëš */______/~ï¼¼ã€‚Ëš Ëš Ë› ',
    'Ëš Ë› â€¢Ë›â€¢ Ëš ï½œ ç”°ç”° ï½œé–€ï½œ Ëš    '
].join('\n');
const bindHandler = {
    init(params) {
        inquirer
  .prompt([
   {
       type:"text",
       message:"1âƒ£ï¸ è¯·è¾“å…¥æ–‡ä»¶å¤¹çš„åç§°",
       name:"dirname"
   }
  ])
  .then(answers => {
      console.log(answers);
    shelljs.cd(`${userhome}/Desktop/`);
    const spinner = ora("ğŸ‘§ downloading.....");
    spinner.start();
    shelljs.mkdir(`${answers.dirname}`);
    let jsonContent = JSON.stringify(interfacedata);
    let result = json2ts.convert(jsonContent);
    console.log(result);
  });
        
    }
}
program.version(Printer.default.fromString(input), '-v,--version')
program
    .option('-p, --peppers', 'Add peppers')
    .usage("<cmd> [options]")
    .arguments("<cmd> [env]")
    .action((cmd, otherParams) => {
        const handler = bindHandler[cmd];
        if (!handler) {
            console.error(chalk.blue(`å½“å‰åŠŸèƒ½ï¼š${cmd}æš‚æœªæä¾›ğŸ˜¢`));
            process.exit(1);
        } else {
            handler(otherParams);
        }
    })
    .parse(process.argv);