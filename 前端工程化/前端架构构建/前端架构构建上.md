### ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ
æŒç»­é›†æˆï¼ˆCIï¼‰
åœ¨æŒç»­é›†æˆçš„ç¯å¢ƒä¸­ï¼Œå¼€å‘äººå‘˜å°†ä¼šé¢‘ç¹çš„æäº¤ä»£ç åˆ°ä¸»å¹²ã€‚è¿™äº›æ–°æäº¤åœ¨æœ€ç»ˆåˆå¹¶åˆ°ä¸»çº¿ä¹‹å‰ï¼Œéƒ½éœ€è¦é€šè¿‡ç¼–è¯‘å’Œè‡ªåŠ¨åŒ–æµ‹è¯•æµè¿›è¡ŒéªŒè¯ã€‚è¿™æ ·åšæ˜¯åŸºäºä¹‹å‰çš„æŒç»­é›†æˆè¿‡ç¨‹ä¸­å¾ˆé‡è§†è‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯ç»“æœï¼Œ1ä»¥ä¿è¯æ‰€æœ‰çš„æäº¤åœ¨åˆå¹¶ä¸»å¹²çš„è´¨é‡é—®é¢˜ï¼Œå¯¹å¯èƒ½å‡ºç°çš„ä¸€äº›é—®é¢˜è¿›è¡Œé¢„è­¦ã€‚

æˆ‘ä»¬ä¹‹å‰çš„æµç¨‹æ˜¯ï¼Œæˆ‘å®Œæˆä¸€ä¸ªæ¨¡å—ï¼Œç„¶åäººå·¥å‘ŠçŸ¥QAè¯´ï¼Œæˆ‘è¿™è¾¹è§£å†³äº†ï¼Œç„¶åQAå¼€å§‹æµ‹è¯•ï¼Œå‡ºäº†é—®é¢˜ï¼Œè¢«æ‰“å›ï¼Œç„¶åç»§ç»­æ”¹ï¼Œç»§ç»­æµ‹ï¼Œä¸¤ä¸ªäººç–¯ç‹‚çš„åœ¨é‚£é‡Œæ‰“å¤ªæï¼Œä¸¥é‡é™ä½äº†æ•ˆç‡ã€‚
æ‰€ä»¥æˆ‘ä»¬åŠ å…¥äº†æŒç»­é›†æˆï¼ˆCIï¼‰.æ¯ä¸€æ¬¡ï¼Œå½“å‰ç«¯ä»£ç æäº¤åˆ°ä¸»çº¿ä¸Šçš„æ—¶å€™ï¼Œéƒ½ä¼šè‡ªåŠ¨è·‘è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç­‰åˆ°è‡ªåŠ¨åŒ–è„šæ­¥è·‘äº†æ²¡é”™ä¹‹åï¼Œæ‰ä¼šåˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œç„¶åå‘æ¶ˆæ¯é€šçŸ¥QAæ¥ä»‹å…¥ï¼Œè¿™æ ·å°±å‡å°‘äº†å¾ˆå¤šQAå’Œå‰ç«¯çš„äº¤äº’

è‡ªåŠ¨åŒ–æäº¤ä»£ç ï¼Œæ˜¯ç¨‹åºå‘˜å°†ä»£ç æäº¤åˆ°è¿œç¨‹çš„ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œç„¶åè¿™ä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²ç€webpackå•Šï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„è„šæœ¬ç­‰ç­‰ï¼Œç„¶åç­‰æ•´ä¸ªé¡¹ç›®é€šè¿‡äº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„è„šæœ¬ä¹‹åï¼Œç„¶åé€šçŸ¥æµ‹è¯•ï¼Œè¿™æ—¶æµ‹è¯•åªè´Ÿè´£ä¸€éƒ¨åˆ†å¿…é¡»æµ‹è¯•çš„å†…å®¹ï¼Œæµ‹è¯•å®Œé€šè¿‡ä¹‹åï¼Œç„¶åäº¤ä»˜ç»™CD,CDå¼€å§‹è‡ªåŠ¨åŒ–éƒ¨ç½²

**æŒç»­éƒ¨ç½²ï¼ˆcontinuous deploymentï¼‰ç®€ç§°CD**
- å¦‚æœæˆ‘ä»¬æƒ³æ›´åŠ æ·±å…¥çš„è¯ï¼Œå°±æ˜¯æŒç»­éƒ¨ç½²äº†ã€‚é€šè¿‡è¿™ä¸ªæ–¹å¼ï¼Œä»»ä½•ä¿®æ”¹é€šè¿‡æ‰€æœ‰å·²æœ‰çš„å·¥ä½œæµå°±ä¼šç›´æ¥å’Œå®¢æˆ·è§é¢ã€‚æ²¡æœ‰è®¤ä¸ºçš„å¹²é¢„ï¼ˆæ²¡æœ‰ä¸€é”®éƒ¨ç½²æŒ‰é’®ï¼‰ï¼Œåªæœ‰å½“ä¸€ä¸ªä¿®æ”¹åœ¨å·¥ä½œæµä¸­æ„å»ºå¤±è´¥æ‰èƒ½é˜»æ­¢ä»–éƒ¨ç½²åˆ°ç”Ÿäº§çº¿ä¸Š
- æŒç»­éƒ¨ç½²æ˜¯ä¸€ä¸ªå¾ˆä¼˜ç§€çš„æ–¹å¼ï¼Œå¯ä»¥åŠ é€Ÿä¸å®¢æˆ·çš„åé¦ˆå¾ªç¯ï¼Œä½†æ˜¯ä¼šç»™å›¢é˜Ÿå¸¦æ¥å‹åŠ›ï¼Œå› ä¸ºå†ä¹Ÿæ²¡æœ‰â€œå‘å¸ƒæ—¥â€äº†ã€‚å¼€å‘äººå‘˜å¯ä»¥ä¸“æ³¨äºæ„å»ºè½¯ä»¶ï¼Œä»–ä»¬çœ‹åˆ°ä»–ä»¬çš„ä¿®æ”¹åœ¨ä»–ä»¬å®Œæˆå·¥ä½œçš„å‡ åˆ†é’Ÿå†…å°±ä¸Šçº¿äº†ï¼ŒåŸºæœ¬ä¸Šï¼Œå½“å¼€å‘äººå‘˜åœ¨ä¸»åˆ†æ”¯åˆå¹¶ä¸€ä¸ªæäº¤æ—¶ï¼Œè¿™ä¸ªåˆ†æ”¯å°†è¢«æ„å»ºã€æµ‹è¯•ï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œåˆ™éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸Šã€‚

è¿™ä¸ªæ–¹æ³•å°±åœ¨çº¿ä¸‹æµ‹è¯•é€šè¿‡äº†ï¼Œç„¶åé€šè¿‡æµ‹è¯•è„šæœ¬ï¼Œå°±ä¼šç›´æ¥å¾€çº¿ä¸Šéƒ¨ç½²ï¼Œä»£æ›¿çº¿ä¸Šçš„ä»£ç ã€‚è¿™æ ·çš„è¿‡ç¨‹å¯¹å›¢é˜Ÿçš„å‹åŠ›å¾ˆå¤§ï¼Œå¯¹å…¬å¸çš„äººå‘˜çš„ç¡¬å®åŠ›è¦æ±‚å¾ˆé«˜ã€‚
å®ç°è¿™ä¸ªæ–¹æ³•çš„å¹³å°æœ‰ï¼šdevops  å¯ä»¥ç†è§£æˆï¼ˆsoftenginer,qa,technology operationsï¼‰ä¸‰ä¸ªä¸œè¥¿åˆå¹¶åœ¨ä¸€èµ·äº†ã€‚è¿™ä¸ªä¸œè¥¿æœ€é‡è¦çš„éƒ¨åˆ†å°±æ˜¯CI


**æŒç»­äº¤ä»˜ï¼ˆcontinuous deliveryï¼‰**
- æŒç»­äº¤ä»˜å°±æ˜¯è®²æˆ‘ä»¬çš„åº”ç”¨å‘å¸ƒå‡ºå»çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç¡®ä¿æˆ‘ä»¬å°½å¯èƒ½å¿«çš„å®ç°äº¤ä»˜ã€‚è¿™å°±æ„å‘³ç€é™¤äº†è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è‡ªåŠ¨åŒ–çš„å‘å¸ƒæµä»¥åŠé€šè¿‡ä¸€ä¸ªæŒ‰é’®å°±å¯ä»¥éšæ—¶éšåœ°çš„å®ç°åº”ç”¨çš„éƒ¨ç½²ä¸Šçº¿ã€‚
- é€šè¿‡æŒç»­äº¤ä»˜ï¼Œä½ å¯ä»¥å†³å®šæ¯å¤©ï¼Œæ¯å‘¨ï¼Œæ¯ä¸¤å‘¨å‘å¸ƒä¸€æ¬¡ï¼Œå®Œå…¨å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡è¿›è¡Œè®¾ç½®
- å¦‚æœçœŸçš„å¸Œæœ›ä½“éªŒåˆ°æŒç»­äº¤ä»˜çš„ä¼˜åŠ¿ï¼Œå°±éœ€è¦è¿›è¡Œå°æ‰¹é‡çš„å‘å¸ƒï¼Œå°½å¿«éƒ¨ç½²åˆ°ç”Ÿäº§çº¿ä¸Šï¼Œä»¥ä¾¿å‡ºç°é—®é¢˜çš„æ—¶æ–¹ä¾¿è¿›è¡Œæ•…éšœæ’é™¤ã€‚


**æŒç»­é›†æˆçš„éœ€æ±‚**
1. æŒç»­é›†æˆæ˜¯é€šè¿‡å¹³å°ä¸²è”å„ä¸ªå¼€å‘ç¯èŠ‚ï¼Œå®ç°å’Œæ²‰æ·€å·¥ä½œè‡ªåŠ¨åŒ–çš„æ–¹æ³•
2. çº¿ä¸Šä»£ç å’Œä»£ç ä»“åº“ä¸åŒæ­¥ï¼Œå½±å“è¿­ä»£å’Œå›¢é˜Ÿåä½œ
3. é™æ€èµ„æºå‘å¸ƒä¾èµ–äººå·¥ï¼Œæµªè´¹å¼€å‘äººåŠ›
4. ç¼ºå°‘è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œäº§å“è´¨é‡å¾—ä¸åˆ°ä¿éšœ
5. æ–‡æ¡ˆç®€å•ä¿®æ”¹ä¸Šçº¿ï¼Œéœ€è¦æŠ€æœ¯çš„ä»‹å…¥ã€‚

ä¸€ä¸ªé¡¹ç›®ä¸Šçº¿çš„æµç¨‹

![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/node/chixujichengliucheng.png)

- é¦–å…ˆç«‹é¡¹
- ç„¶åäº§å“ç»å†é‡‡é›†éœ€æ±‚ï¼Œéœ€æ±‚æ–‡æ¡£ç¼–å†™å®Œæˆä¹‹åï¼Œå°†éœ€æ±‚æ–‡æ¡£æ”¾å…¥åˆ°ä»£ç ä»“åº“é‡Œé¢
- ç„¶åå¼€å‘äººå‘˜é€šè¿‡éœ€æ±‚æ–‡æ¡£å¼€å‘å®Œäº†æ•´ä¸ªé¡¹ç›®çš„ä»£ç ï¼Œå°†ä»£ç æ”¾å…¥åˆ°ä»£ç ä»“åº“é‡Œé¢
- ç„¶åè‡ªåŠ¨åŒ–æ„å»ºå¹³å°å°±ä¼šä»é¡¹ç›®çš„ä»£ç ä»“åº“é‡Œé¢æ‹‰å–ä»£ç ï¼ˆgitlab æ—¢å¯ä»¥ä¸Šä¼ svnï¼Œä¹Ÿèƒ½ä¸Šä¼ gité¡¹ç›®ï¼‰ï¼Œæ‹‰å–å®Œä»£ç ä¹‹åï¼Œæ„å»ºå¹³å°è°ƒç”¨å„è‰²çš„æ„å»ºå·¥å…·ï¼ˆwebpack,fisï¼‰ä¹‹ç±»çš„ï¼Œå¼€å§‹å¯¹é¡¹ç›®è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼Œé¡¹ç›®æ„å»ºå®Œä¹‹åï¼Œéƒ¨ç½²åˆ°å†…ç½‘ç¯å¢ƒä¸­ï¼Œç„¶åå‘æ¶ˆæ¯é€šçŸ¥qaå»æµ‹è¯•ï¼Œqaå¼€å§‹æµ‹è¯•è‡ªå·±çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•é€šè¿‡ä¹‹åï¼Œå¼€å§‹éƒ¨ç½²åˆ°å¤–ç½‘ç¯å¢ƒï¼Œç„¶ååœ¨è¿ç»´å’Œå¼€å‘ä¹‹é—´æœ‰ä¸ªç‰¹æ®Šçš„ç”¨æˆ·è¿è¥äº§å“ç ”å‘ï¼Œè¿™ä¸ªè§’è‰²ï¼Œå°†ä½“éªŒç”¨æˆ·å¸¦åˆ°ç‰¹å®šçš„åœºæ‰€ä¸­ï¼Œä½¿ç”¨ç‰¹æ®Šçš„å·¥å…·ï¼ˆå¦‚è…¾è®¯çš„ï¼šçœ¼åŠ¨ä»ªï¼‰ï¼Œé‡‡é›†åˆ°ç”¨æˆ·çš„æ‰‹å–œæ¬¢ç‚¹å‡»æ•´ä¸ªå±å¹•çš„é‚£ä¸ªåœ°æ–¹ï¼Œå’Œçœ¼ç›æ³¨æ„çš„ä¸»è¦åŒºåŸŸã€‚å°†è¿™äº›ä¿¡æ¯é‡‡é›†å®Œæˆä¹‹åï¼Œç„¶åé€šçŸ¥äº§å“ï¼Œé’ˆå¯¹è¿™äº›å†…å®¹å†æ¬¡è¿›è¡Œéœ€æ±‚ä¿®æ”¹ï¼Œæœ€åé€šçŸ¥uiåŠ¨ç”»ï¼Œé‡æ–°è®¾è®¡ï¼Œå¼€å‘äººå‘˜å¼€å§‹æ›´æ”¹ï¼Œæœ€åé‡å¤è‡ªåŠ¨åŒ–æµç¨‹ï¼Œæœ€åä¸Šçº¿ã€‚

**å¦‚æœæƒ³è¦é€šè¿‡è¿™ä¸ªæ–¹å¼æ¥æ„å»ºé¡¹ç›®éœ€è¦ä»¥ä¸‹çš„æ¡ä»¶**
- ç»Ÿä¸€çš„ä»£ç ä»“åº“é€šè¿‡åˆ†æ”¯ç®¡ç†åˆå¹¶ä¸»å¹²svn
- è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œç¼–è¯‘ï¼Œéƒ¨ç½²ï¼Œæµ‹è¯•ï¼Œç›‘æ§ï¼Œæœ¬æœºå¼€å‘ä¸Šçº¿ç¯å¢ƒã€‚å¦‚ï¼šfis3/webpack/jdists/package.json//chai/supertest/mocha/selenium-webdriver
- æŒç»­åŒ–é›†æˆå¹³å°ï¼šjenkins,travis ci
- éƒ¨ç½²å·¥å…·ï¼šrsync,shelljs,yargs
- è¿è¥åŒå­¦æœ‰æƒé™æ“ä½œè¿è¥é¡µé¢ä¿å­˜å³å¯ä¸Šçº¿ã€‚


### ä»€ä¹ˆæ˜¯ç»Ÿä¸€ä»£ç ä»“åº“
**SVNé¡¹ç›®å¼€å‘é˜¶æ®µå›¾ç¤º**

![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/node/svnxiangmukaifajieduan.png)

æ­£ç¡®çš„æµç¨‹æ˜¯
1. å¼€å‘äººå‘˜Aä»ä¸»åˆ†æ”¯ä¸Šï¼Œæ‹‰ä¸€ä¸ªåˆ†æ”¯ A01,å¼€å‘äººå‘˜Bä»ä¸»åˆ†æ”¯ä¸Šï¼Œæ‹‰ä¸€ä¸ªåˆ†æ”¯A02
2. å¼€å‘äººå‘˜Aå¼€å‘å®Œï¼Œæµ‹è¯•å®Œæ²¡é—®é¢˜ï¼Œå°†åˆ†æ”¯mergeåˆ°ä¸»åˆ†æ”¯ä¸Šï¼Œæ‰“ä¸Šç‰ˆæœ¬Tag ,ç„¶åå¼€å‘äººå‘˜Béœ€è¦ä»ä¸»åˆ†æ”¯ä¸Špullä¸‹æ¥ä»£ç ï¼Œè¿›è¡Œç¬¬ä¸€æ¬¡mergeåï¼Œæ‰èƒ½pushåˆ°ä¸»åˆ†æ”¯ä¸Šï¼Œç„¶åæ‰“ä¸Šç‰ˆæœ¬tag

tag:ä»£ç æ ‡ç­¾ï¼Œæ–¹ä¾¿ä»£ç å›æ»šã€‚
**svnçš„ä½¿ç”¨æ­¥éª¤**
- SVN checkout svnåœ°å€ --username ç”¨æˆ·å
- svn branch åˆ†æ”¯å ï¼ˆå¯ä»¥è¿›è¡Œadd ,commit ï¼‰
- svn merge ä¸»å¹²svnåœ°å€ åˆ†æ”¯svnåœ°å€
- Beyond  Compare  -> svn resolved.  è§£å†³åˆå¹¶åˆ†æ”¯çš„æ—¶å€™çš„å†²çª
- svn copy ä¸»å¹²svn /tags/2017  

**å½“ç„¶è¿™äº›å‘½ä»¤ä¸ä»…ä»…å¯ä»¥ç›´æ¥ç”¨æ¥æ‰‹åŠ¨è¾“å…¥ï¼Œå¯ä»¥é€šè¿‡`shelljs`æ¨¡å—åœ¨nodejsä¸­è‡ªå·±æ­å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œç„¶åèƒ½å¤Ÿè‡ªåŠ¨åŒ–çš„æ‰§è¡Œè¿™äº›å‘½ä»¤**

```
const shell = reqire('shelljs')
exports.createBranch  = function(req,resp){
    sheel.exec("git branch"+req.params.name); // ä»ä¸»åˆ†æ”¯ä¸­æ‹‰å‡ºä¸€ä¸ªåä¸ºreq.params.name çš„åˆ†æ”¯
    console.log(shell.exec('git checkout '+req.params.name).code); // å¹¶ä¸”åˆ‡åˆ°è¿™ä¸ªåˆ†æ”¯
    console.log(shell.exec('git push origin '+req.params.name).code);
    res.json(successMessage);
}
```

### å‰ç«¯å·¥ç¨‹åŒ–çš„ç›®æ ‡
- è‡ªåŠ¨åŒ–ç¼–è¯‘
- å‰ç«¯æ¨¡å—åŒ–
- å®šä½å‰ç«¯èµ„æº
- å‰ç«¯å¼€å‘ç»„ä»¶åŒ–
- è‡ªåŠ¨åŒ–éƒ¨ç½²æµ‹è¯•é…åˆç‰ˆæœ¬åº“
- è‡ªåŠ¨åŒ–æ€§èƒ½ä¼˜åŒ–ï¼ˆå‰ç«¯æ¶æ„å¼€å‘ä¸‹ï¼‰

#### è‡ªåŠ¨åŒ–ç¼–è¯‘çš„æµç¨‹

1. è¯»å…¥foo.esæ–‡ä»¶å†…å®¹ï¼Œç¼–è¯‘æˆjså†…å®¹
2. åˆ†æjså†…å®¹ï¼Œæ‰¾åˆ°èµ„æºå®šä½æ ‡è®°â€˜foo.scssâ€™
3. å¯¹foo.scssè¿›è¡Œç¼–è¯‘
    1. è¯»å…¥foo.scssçš„æ–‡ä»¶å†…å®¹è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘æˆcsså†…å®¹
    2. åˆ†æcsså†…å®¹ï¼Œæ‰¾åˆ°èµ„æºå®šä½æ ‡è®°''url(foo.png)''
    3. å¯¹foo.pngè¿›è¡Œç¼–è¯‘
        1. è¯»å…¥foo.pngçš„å†…å®¹
        2. å›¾ç‰‡å‹ç¼©
        3. è¿”å›å›¾ç‰‡å†…å®¹
    4. æ ¹æ®foo.pngçš„æœ€ç»ˆç›®æ ‡è®¡ç®—md5æˆ³ï¼Œæ›¿æ¢url('foo.png')ä¸ºurl('/static/img/foo_2afob.png');
    5. æ›¿æ¢å®Œæ‰€æœ‰èµ„æºå®šä½æ ‡è®°ï¼Œå¯¹csså†…å®¹è¿›è¡Œå‹ç¼©
    6. è¿”å›csså†…å®¹
4. æ ¹æ®foo.cssçš„æœ€ç»ˆå†…å®¹è®¡ç®—md5æˆ³ï¼Œæ›¿æ¢`foo.css`ä¸º`/static/scss/foo_bae39.css`
5. æ›¿æ¢å®Œæ‰€æœ‰çš„èµ„æºå®šä½æ ‡è®°ï¼Œå¯¹jså†…å®¹è¿›è¡Œå‹ç¼©
6. è¿”å›jså†…å®¹
7. æ ¹æ®æœ€ç»ˆçš„jså†…å®¹ï¼Œå¾—åˆ°foo.coffeeçš„èµ„æºurlä¸º`/static/scripts/foo.efc20.js`

#### å‰ç«¯æ¨¡å—åŒ–
- å‰ç«¯æ¨¡å—åŒ–è‚©è´Ÿç€æ¨¡å—ç®¡ç†ï¼Œèµ„æºå®¶åœ¨ä¸¤é¡¹é‡è¦çš„åŠŸèƒ½ï¼Œè¿™ä¸¤é¡¹åŠŸèƒ½ä¸å·¥å…·ã€æ€§èƒ½ã€ä¸šåŠ¡ã€éƒ¨ç½²ç­‰å·¥ç¨‹ç¯èŠ‚éƒ½æœ‰ç€éå¸¸ç´§å¯†çš„è”ç³»ã€‚å› æ­¤æ¨¡å—åŒ–æ¡†æ¶çš„è®¾è®¡åº”è¯¥æœ€é«˜ä¼˜å…ˆçº§è€ƒè™‘å·¥ç¨‹éœ€è¦
- CommonJs API å®šä¹‰å¾ˆå¤šæ™®é€šåº”ç”¨ç¨‹åºï¼ˆä¸»è¦æŒ‡éæµè§ˆå™¨çš„åº”ç”¨ï¼‰ä½¿ç”¨çš„APIï¼Œä»è€Œå¡«è¡¥äº†è¿™ä¸ªç©ºç™½ã€‚ä»–çš„ç»ˆæç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç±»ä¼¼Pythonã€Rubyå’Œjavaæ ‡å‡†åº“
- æ ¹æ®è¿™ä¸ªè§„èŒƒï¼Œæ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„æ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»ã€éƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å…¶ä»–æ–‡ä»¶ä¸å¯è§
- **Cmdå’ŒAMDéƒ½æ˜¯Commonjsçš„ä¸€ç§è§„èŒƒçš„å®šä¹‰ï¼ŒRequirejså’Œseajsæ˜¯å¯¹åº”çš„å®è·µ**


**CommonJs**
Commonjså®šä¹‰çš„æ¨¡å—åˆ†ä¸ºï¼š{æ¨¡å—å¼•ç”¨ï¼ˆrequireï¼‰}{æ¨¡å—å®šä¹‰ï¼ˆexportsï¼‰}{æ¨¡å—æ ‡è¯†ï¼ˆmoduleï¼‰}
require()ç”¨æ¥å¼•å…¥å¤–éƒ¨æ¨¡å—ï¼›exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–è€…å˜é‡ï¼Œå”¯ä¸€å¯¼å‡ºå£ï¼›moduleå¯¹è±¡å°±ä»£è¡¨å¯¼å‡ºæ¨¡å—æœ¬èº«

nodeä»¥åŠwebpackå°±æ˜¯ä½¿ç”¨äº†`commonjs`è§„èŒƒä½œä¸ºæ¨¡å—ç®¡ç†ã€‚

**AMD(Asynchronous Module Definition å¼‚æ­¥æ¨¡å—åŠ è½½)**

`AMD`ä¹Ÿé‡‡ç”¨`require()`è¯­å¥åŠ è½½æ¨¡å—ï¼Œä½†ä¸åŒäºCommonjs,ä»–è¦æ±‚ä¸¤ä¸ªå‚æ•°

```
require(ã€Œmoduleã€,callback)
```
cmdè®²ç©¶çš„å°±æ˜¯ï¼Œæˆ‘æŠŠæ‰€æœ‰çš„éœ€è¦åŠ è½½çš„æ¨¡å—éƒ½æ‹¿ä¸‹æ¥ï¼Œç„¶åï¼Œåœ¨æˆ‘çš„é‡Œé¢ï¼Œä½ åªèƒ½ä½¿ç”¨è¿™äº›å·²ç»åœ¨åŠ è½½è¿‡äº†çš„æ¨¡å—ï¼Œä¹Ÿä¸å‡†ä½ å†æ¬¡çš„å»åŠ è½½å…¶ä»–æ¨¡å—

RequireJså°±æ˜¯å®ç°äº†AMDè§„èŒƒ

RequireJsçš„ä½¿ç”¨åœºæ™¯åˆ†æ
1. æœ€æ—©çš„æ—¶å€™ï¼Œæ‰€æœ‰javascriptçš„ä»£ç éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œåªè¦åŠ è½½ä¸€ä¸ªæ–‡ä»¶å°±å¤Ÿäº†ã€‚åæ¥ä»£ç è¶Šæ¥è¶Šå¤šï¼Œä¸€ä¸ªæ–‡ä»¶ä¸å¤Ÿäº†ï¼Œå¿…é¡»åˆ†ä¸ºå¤šä¸ªjsæ–‡ä»¶ä¸€æ¬¡åŠ è½½ã€‚

**CMD**



```
define(function(require,exports,module){
    var xxx  = require('xxx');
})

CMDæ›´åŠ è®²ç©¶çš„æ˜¯æˆ‘ç°ç”¨å…ˆæ‹¿ï¼Œæˆ‘æŠŠrequireï¼Œexports,moduleç»™ä½ æä¾›äº†ï¼Œä½ è¦ç”¨ä»€ä¹ˆæ¨¡å—ï¼Œç›´æ¥åŠ è½½ä»€ä¹ˆæ¨¡å—å°±å¥½äº†ï¼Œè¿™æ¯”è¾ƒåƒnodejs
```

**CMDå’ŒAMDçš„ä¼˜ç¼ºç‚¹**
1. cmdä¾èµ–çš„æ˜¯å°±è¿‘å£°æ˜ï¼Œé€šè¿‡å†…éƒ¨requireæ–¹æ³•è¿›è¡Œå£°æ˜ã€‚ä½†æ˜¯å› ä¸ºæ˜¯å¼‚æ­¥æ¨¡å—ï¼ŒåŠ è½½å™¨éœ€è¦æå‰åŠ è½½è¿™äº›æ¨¡å—ï¼Œæ‰€ä»¥æ¨¡å—çœŸæ­£çš„ä½¿ç”¨å‰éœ€è¦æå–æ¨¡å—é‡Œé¢æ‰€æœ‰çš„æ¨¡å—
2. ä¸èƒ½ç›´æ¥å‹ç¼©ï¼Œrequireå±€éƒ¨å˜é‡å¦‚æœæ›¿æ¢æ— æ³•åŠ è½½èµ„æº
3. cmdè·¯å¾„ä¸èƒ½è¿›è¡Œå­—ç¬¦ä¸²è¿ç®—
4. AMDçš„ä¾èµ–éœ€è¦æå‰å£°æ˜ã€‚è¿™ç§ä¼˜åŠ¿çš„å¥½å¤„å°±æ˜¯ä¾èµ–æ— éœ€é€šè¿‡é™æ€åˆ†æï¼Œæ— è®ºæ˜¯åŠ è½½å™¨è¿˜æ˜¯è‡ªåŠ¨åŒ–å·¥å…·éƒ½å¯ä»¥ç›´æ¥è·å–åˆ°ä¾èµ–
5. AMDä¾èµ–æå‰å£°æ˜åœ¨ä»£ç ä¹¦å†™ä¸Šéå¸¸å‹å¥½ğŸ
6. AMDæ¨¡å—å†…éƒ¨ä¸NodeJsçš„moduleæœ‰ä¸€å®šçš„å·®å¼‚

åˆ†æï¼šcmdåŠ è½½å™¨è¦å»æ‰¾åˆ°æ‰€æœ‰çš„æ¨¡å—ï¼Œé€šè¿‡æ­£åˆ™å»åŒ¹é…æ‰€æœ‰require()ä¸Šçš„å†…å®¹ï¼Œæ‰€ä»¥å½“æŠŠ`var xxx = require("xxx")`è¿™æ®µä»£ç æ³¨é‡Šæ‰ï¼Œè¿™æ®µä»£ç çš„å¯¼å…¥ä¾ç„¶æ˜¯ç”Ÿæ•ˆçš„ã€‚

**æ¥ä¸‹æ¥æ˜¯ä¸€æ®µrequireç¼–è¯‘åçš„è½¬æ¢æƒ…å†µ**


```
//footer.esæ–‡ä»¶
require('a.es')

//->è½¬æ¢å
// a.es->a.xxx555ff.js
;define('common:widget/footer/footer.es',function(){
    // a.xxx555ff.js
})
```

defineæ˜¯AMDçš„è§„å®šçš„ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœè¦ä½¿ç”¨AMDè§„èŒƒï¼Œå°±å¿…é¡»é‡‡ç”¨ç‰¹å®šçš„`define()`å‡½æ•°æ¥å®šä¹‰ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—ä¸ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å®šä¹‰åœ¨`define()`å‡½æ•°ä¹‹ä¸­ã€‚
```
// math.js
define(function(){
    var add  = function(x,y){
        return x+y;
    }
    return {
        add:add
    }
})

// åŠ è½½æ–¹æ³•
require(['math'],function(math){
    alert(math(1,1));
})
```
è¿™é‡Œç”±äºæ•´ä¸ª`math.js`æ–‡ä»¶å¹¶ä¸ä¼šä¾èµ–ä»»ä½•å†…å®¹æ‰€ä»¥`math.js`æ¨¡å—å¯ä»¥ç›´æ¥å®šä¹‰åœ¨`define`å‡½æ•°å†…

#### webpack

ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpack
- webpackæ‰§è¡Œcommonjsæ ‡å‡†ï¼Œè§£å†³äº†ä¾èµ–é…ç½®å’Œè¯·æ±‚æµé‡
- å¯¹äºwebpackæ¥è®²ä¸‡ç‰©éƒ½å¯ä»¥æ˜¯æ¨¡å—ï¼Œæ‰€æœ‰çš„æ–‡ä»¶éƒ½è¢«åˆå¹¶åˆ°JSä¸­ï¼Œæœ€ç»ˆåœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚
- å…¼å®¹AMDå’ŒCMD
- JSæ¨¡å—åŒ–ä¸ä»…ä»…ä¸ºäº†æé«˜ä»£ç å¤ç”¨æ€§ï¼Œæ›´æ˜¯ä¸ºäº†è®©èµ„æºæ–‡ä»¶æ›´åˆç†çš„è¿›è¡Œç¼“å­˜

#### é™æ€èµ„æºå®šä½

ä»€ä¹ˆæ˜¯é™æ€èµ„æºå®šä½
1. åˆšå¼€å§‹å­¦å‰ç«¯çš„æ—¶å€™ï¼Œå†™ä¸ªé™æ€é¡µé¢å¼•ä¸€ä¸ªcssï¼Œå¼€å¼€å¿ƒå¿ƒä¸Šçº¿

![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/qianduangongchenghua/jingtaiziyuandingwei.png)

2. ç„¶ååˆ°ç¬¬äºŒæ¬¡è®¿é—®çš„æ—¶å€™ï¼Œcssæ–‡ä»¶çš„è®¿é—®å°±è¢«å®šä½åˆ°ç¼“å­˜ä¸Šï¼Œç„¶åå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¿é—®çš„çŠ¶æ€`from cache`ï¼Œå¾ˆå®Œç¾ï¼Œperfect
è¦çŸ¥é“ï¼Œæ€ä¹ˆæ ·æ‰èƒ½æ¸…é™¤æ‰æµè§ˆå™¨ç¼“å­˜ï¼Œç›´æ¥åˆ°è®¾ç½®å»æ¸…é™¤ç­‰ç­‰ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ä¸å¯æ§çš„ã€‚ 

é‚£è¦æ€ä¹ˆè®©æˆ‘ç¼“å­˜å¤„äºå¯ä»¥æ§åˆ¶çš„çŠ¶æ€å‘¢ã€‚
**ç„¶åå°±å‡ºç°äº†`ç‰ˆæœ¬æˆ³`**
![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/qianduangongchenghua/banbenchuo.png)
è¿™æ ·åœ¨`href`ä¸Šå¢åŠ äº†ä¸€ä¸ªç‰ˆæœ¬æˆ³ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å®æ—¶çš„æ–‡ä»¶æ›¿æ¢äº†ã€‚
ä½†æ˜¯è¿™æ ·ä¹Ÿæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘çš„`a.css`æ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™æ—¶å€™è¦ä¸Šç‰ˆæœ¬ï¼Œå°±ä¼šç›´æ¥æŠŠç¼“å­˜ä¸­çš„`b.css`å’Œ`c.css`ä¹Ÿæ›¿æ¢æ‰äº†ï¼Œæ˜æ˜è¿™ä¸¤ä¸ªæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œä¸åº”è¯¥è¢«æ›¿æ¢æ‰
åæ¥ä¹Ÿå°±åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå˜æˆäº†**æ–‡ä»¶md5åç¼€**
![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/qianduangongchenghua/mdchuo.png)
æ¯æ¬¡ä¸Šç‰ˆæœ¬çš„æ—¶å€™ï¼Œæ›´æ”¹æ–‡ä»¶çš„md5çš„æˆ³ã€‚


ä½†æ˜¯è¿™æ ·ä¹Ÿä¼šå‡ºé—®é¢˜ï¼Œå¦‚æœhtmlæ–‡ä»¶å’Œcssæ–‡ä»¶åŒæ—¶å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ—¶å€™éœ€è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿå…ˆä¸Šcssæ–‡ä»¶ï¼Œä¹‹å‰çš„`foo`å±æ€§æ²¡äº†ï¼Œé¡µé¢ä¹±äº†ï¼Œå¦‚æœå…ˆä¸Šhtmlæ–‡ä»¶ï¼Œå¾—æ‰¾ä¸åˆ°åé¢çš„`bar`å±æ€§ã€‚é¡µé¢ä¹Ÿä¹±ï¼Œå½“ç„¶ç”±äºç½‘ç»œçš„ä¸Šä¼ å»¶è¿Ÿå’Œæ–‡ä»¶å¤§å°ä¸ä¸€æ ·ï¼Œå¾ˆéš¾å‡ºç°ä¸¤è€…åŒæ—¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æƒ…å†µ:

![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/qianduangongchenghua/mdchuodebug.png)

æ‰€ä»¥è¿™ä¸ªæ—¶å€™éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼š
ä¹Ÿå°±æ˜¯æŠŠmd5æˆ³æ”¾åˆ°æ–‡ä»¶åä¸Šé¢å»ã€‚
![](https://github.com/4lQuiorrA/FE_Journey/blob/master/image/qianduangongchenghua/cssmdwenjianming.png)
è¿™æ—¶å€™å½¢å¼å°±æ˜æ˜¾äº†ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠæ–°çš„cssä¸Šä¼ ä¸Šå»ã€‚ç„¶ååœ¨htmlä¸Šä¼ ä¸Šå»ï¼ŒæœåŠ¡å™¨æ›´æ–°è¿‡æ¥äº†å°±èƒ½ç›´æ¥è®¿é—®æ–°çš„css,æ²¡æœ‰æ›´æ–°è¿‡æ¥çš„ä¾ç„¶å¯ä»¥è®¿é—®åˆ°æ—§çš„cssã€‚è¿™æ ·å¤šå‡ºæ¥çš„å“ªä¸€ä¸ªcssï¼Œä¹Ÿèƒ½ç”¨æ¥æ–¹ä¾¿åšå›æ»šç”¨ã€‚

æ‰€ä»¥è¿™ç§æƒ…å†µæµè§ˆå™¨ä¸€å®šä¸èƒ½ä½¿ç”¨ç¼“å­˜ã€‚è¦è®¾ç½®æˆ`no-cache`.ä¸€ä¸ªç½‘ç«™çš„ä¸»é¡µä¸€å®šä¸èƒ½ä½¿ç”¨é¡µé¢ç¼“å­˜ï¼Œç”¨äº†é¡µé¢ç¼“å­˜å°±æŒ–å‘äº†ï¼Œæ›´æ”¹é¡µé¢ä¹‹åï¼Œå¾ˆå®¹æ˜“éƒ¨ç½²äº†ï¼Œå¯¼è‡´ç”¨æˆ·å“ªé‡Œä»ç„¶ç…§æ ·ä½¿ç”¨æ—§çš„ï¼Œåšçš„åŠªåŠ›ç™¾æ­ã€‚

**èµ„æºå®šä½**

1. é…ç½®è¶…é•¿æ—¶é—´çš„æœ¬åœ°ç¼“å­˜-èŠ‚çœå¸¦å®½ï¼Œæé«˜æ€§èƒ½
2. é‡‡ç”¨å†…å®¹æ‘˜è¦ä½œä¸ºç¼“å­˜æ›´æ–°ä¾æ®-ç²¾ç¡®çš„ç¼“å­˜æ§åˆ¶
3. é™æ€èµ„æºcdnéƒ¨ç½²-ä¼˜åŒ–ç½‘ç»œè¯·æ±‚
4. æ›´æ–°èµ„æºå‘å¸ƒè·¯å¾„å®ç°éè¦†ç›–å¼å‘å¸ƒ-å¹³æ»‘å‡çº§

5. FIS3æ ¹æ®åˆ†æå¥½çš„æ–‡ä»¶åŒ…ï¼Œåˆ©ç”¨HOOKæ’ä»¶
// åˆ†æä¸‹FISç”Ÿæˆçš„é…ç½®æ–‡ä»¶
6. webpackåœ¨å¼€å‘é˜¶æ®µæ‰“åŒ…ï¼Œåˆ©ç”¨æ’ä»¶åˆ†æå¤„ç†ç›´æ¥æå–ã€‚`FileLoader&extract-text-webpack-plugin`
7. é…ç½®publicpathåˆ†å‘åˆ°cdnä¸Š

#### å‰ç«¯å¼€å‘ç»„ä»¶åŒ–
**å¼€å‘ç»„ä»¶åŒ–**
1. æ¯ä¸ªå‰ç«¯æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå°é¡¹ç›®ï¼Œé…åˆ`mock.js`å¯ä»¥è¿›è¡Œæœ¬åœ°çš„å¼€å‘æµ‹è¯•ï¼Œpackage.jsonæ˜¯æ ‡é…äº§ç‰©ã€‚ç»è¿‡webpackçš„ç¯å¢ƒé…ç½®ç»Ÿä¸€è¿›è¡Œæœ¬åœ°ç¯å¢ƒã€ä¸Šçº¿ç¯å¢ƒçš„ç¼–è¯‘è¿‡ç¨‹ã€‚
2. ç”±pageç»„è£…widget,ç”±widgetç»„è£…web-components(x-TAG)
3. å¯ä»¥æ ¹æ®è·¯ç”±å¿«é€ŸæŠ‰æ‹©é…ç½®SPAæˆ–è€…ç›´å‡ºã€‚

**WebComponentsåˆ†ä¸ºï¼š**
- custom Elements
- html Imports
- HTML Templates
- Shadow Dom

```
//custom Elements

class ButtonHelloElement extends HTMLButtonElement { constructor() {
super()
this.addEventListener('click', () => { alert('hello world')
}) }
}
customElements.define('button-hello', ButtonHelloElement, { extends: 'button' }) 
// html

<button-hello>click æµ‹è¯•</button-hello>
```
**ç‰¹åˆ«æåˆ°è…¾è®¯çš„ä¸€ä¸ªwebcomponentsçš„åº“ï¼šomi(webcomponentsç‰ˆæœ¬çš„jsx,ä¸»è¦åšå¾®å‰ç«¯çš„æ—¶å€™ä½¿ç”¨)**
// HTML import
å°±æ˜¯ä¸€ä¸ªHTMLå¯ä»¥å¼•å…¥å¦ä¸€ä¸ªHTML
```
// html
<link rel="import" href=â€œ/components/header.html">

// js
const link  = document.querySelector("link[rel=import]");
const header = link.import;
const pulus = header.querySelector('div.logo');
// è·å–importçš„htmlçš„document
const d = document.currentScript.ownerDocument
```

// HTML Templates

å°±æ˜¯æµè§ˆå™¨ç›´æ¥æ”¯æŒäº†templateæ ‡ç­¾
**templateæ ‡ç­¾å¯ä»¥ç”¨æ¥å­˜æ”¾ä»¥åéœ€è¦ä½†æ˜¯æš‚æ—¶ä¸æ¸²æŸ“çš„HTMLä»£ç ã€‚**


// Shadow Dom

æ²™ç®±ç¯å¢ƒçš„domå…ƒç´ 
æœ€æœ¬è´¨çš„éœ€æ±‚å°±æ˜¯éœ€è¦ä¸€ä¸ªéš”ç¦»ç»„ä»¶ä»£ç ä½œç”¨åŸŸçš„ä¸œè¥¿ï¼Œä¾‹å¦‚æˆ‘ç»„ä»¶ä»£ç çš„CSSä¸èƒ½å½±å“å…¶ä»–ç»„ä»¶ä¹‹ç±»çš„ã€‚è€Œiframeåˆå¤ªé‡å¹¶ä¸”å¯èƒ½æœ‰å„ç§å¥‡æ€ªé—®é¢˜ï¼Œæ—¨åœ¨æä¾›ä¸€ç§æ›´å¥½çš„ç»„ç»‡é¡µé¢å…ƒç´ çš„æ–¹å¼ï¼Œé¿å…ä»£ç é—´äº’ç›¸å½±å“ã€‚

```
åˆ›å»ºä¸€ä¸ªShadow dom
const div = document.getElementById("id");
const shadowRoot = div.createShadowRoot();
const span = document.createElement('span');
span.textContent = 'hello world';
shadowRoot.appendChild(span);
```
åˆ›å»ºå®Œçš„æ²™ç®±ç¯å¢ƒæ˜¯ï¼š

```
<x-foo>
<"shadow tree">
<div>
<span id="not-top">...</span>
</div>
<span id="top">...</span> </>
</x-foo>
```
x-foo::shadow >spanå¯ä»¥åŒ¹é…åˆ°#topå…ƒç´ 

x-foo /deep/ span å¯ä»¥åŒ¹é…åˆ°#topå’Œ#not-topå…ƒç´ 
:host(.foo) å¯ä»¥åŒ¹é…åˆ°<x-foo>å…ƒç´ 

#### ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–éƒ¨ç½²
